SELECT
	DBMS_LOB.GETLENGTH(CMC.TEXT_LOB) lob_length,
	CASE WHEN DBMS_LOB.GETLENGTH(CMC.TEXT_LOB) < 3995 THEN
		TRANSLATE(dbms_lob.substr(to_clob(CMC.TEXT_LOB), 3994, 1), CHR(10)||chr(11), ' ')
--		REPLACE(dbms_lob.substr(CMC.TEXT_LOB, 4000, 1), chr(13), ' ')
--		CASE WHEN DBMS_LOB.GETLENGTH(CMC.TEXT_LOB) > 3000 THEN
--			TRANSLATE(dbms_lob.substr(to_clob(CMC.TEXT_LOB), 4000, 1), CHR(10)||chr(11)||chr(13), ' ')
--		ELSE
--			TRANSLATE(dbms_lob.substr(to_clob(CMC.TEXT_LOB), 3000, 1), CHR(10)||chr(11)||chr(13), ' ')
--		END
	ELSE 
		SELECT (CAST (TRANSLATE(dbms_lob.substr(to_clob(CMC.TEXT_LOB), 6000, 1), CHR(10)||chr(11), ' ')) AS varchar2) 
		FROM BSI_COMMUNICATION
		WHERE X_COMMUNICATION_EXT_KEY = CMC.X_COMMUNICATION_EXT_KEY)
	END LCM_Communcation_Text_Part1,
	CASE WHEN DBMS_LOB.GETLENGTH(CMC.TEXT_LOB) > 3995 THEN
		TRANSLATE(dbms_lob.substr(to_clob(CMC.TEXT_LOB), 3000, 3995), CHR(10)||chr(11), ' ')
	ELSE 
		SELECT (CAST (TRANSLATE(dbms_lob.substr(to_clob(CMC.TEXT_LOB), 6000, 1), CHR(10)||chr(11), ' ')) AS varchar2) 
		FROM BSI_COMMUNICATION
		WHERE X_COMMUNICATION_EXT_KEY = CMC.X_COMMUNICATION_EXT_KEY)
	END LCM_Communcation_Text_Part2,
--	CMC.TEXT_LOB,
	CMC.X_COMMUNICATION_EXT_KEY
--	CMC.CHANNEL_UID,
--	CMC.STATUS_UID,
--	CMC.ORIGIN_UID
FROM BSI_COMMUNICATION cmc 
WHERE CMC.X_COMMUNICATION_EXT_KEY = '38A18A9F12C96BF5E053C020A60A91BB'
--WHERE CMC.X_COMMUNICATION_EXT_KEY = '38A18A9F12C36BF5E053C020A60A91BB'
;

DECLARE
	my_var LONG;
BEGIN
	
END;

SELECT
	CAST (CHANNEL_UID AS int) my_channel,
	CAST (TEXT_LOB AS varchar2) my_lob
--	CAST (REPLACE(REPLACE(dbms_lob.substr(CMC.TEXT_LOB, 6000, 1), CHR(10), ' '), chr(11), ' ') AS varchar2) 
FROM BSI_COMMUNICATION
WHERE X_COMMUNICATION_EXT_KEY = '38A18A9F12C96BF5E053C020A60A91BB'
;